<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Калькулятор химчистки</title>
    <style>
        * {
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }
        body {
            max-width: 600px;
            margin: 20px auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .calculator {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
        }
        .form-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #34495e;
        }
        select, .options {
            width: 100%;
            padding: 12px;
            border: 2px solid #bdc3c7;
            border-radius: 5px;
            font-size: 16px;
            background: white;
        }
        .options {
            border: none;
            padding: 0;
        }
        .option-item {
            padding: 10px;
            margin: 5px 0;
            background: #ecf0f1;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
        }
        .option-item:hover {
            background: #d5dbdb;
        }
        .option-item.selected {
            background: #3498db;
            color: white;
        }
        .tariff-options {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        .tariff-option {
            flex: 1;
            padding: 15px;
            text-align: center;
            border: 2px solid #bdc3c7;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .tariff-option.selected {
            border-color: #3498db;
            background: #3498db;
            color: white;
        }
        .extras {
            margin-top: 20px;
        }
        .extra-option {
            margin: 10px 0;
            padding: 10px;
            background: #ecf0f1;
            border-radius: 5px;
            cursor: pointer;
        }
        .extra-option.selected {
            background: #3498db;
            color: white;
        }
        .result {
            margin-top: 30px;
            padding: 20px;
            background: #2ecc71;
            color: white;
            border-radius: 5px;
            text-align: center;
            font-size: 24px;
            font-weight: bold;
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="calculator">
        <h1>Калькулятор химчистки</h1>
        
        <div class="form-group">
            <label>Выберите изделие:</label>
            <div class="options" id="productType">
                <div class="option-item" data-value="sofa_2">Диван 2-местный</div>
                <div class="option-item" data-value="sofa_3">Диван 3-местный</div>
                <div class="option-item" data-value="armchair">Кресло</div>
                <div class="option-item" data-value="mattress_1">Матрас односпальный</div>
                <div class="option-item" data-value="mattress_2">Матрас двуспальный</div>
                <div class="option-item" data-value="carpet_small">Ковер (маленький до 3м²)</div>
                <div class="option-item" data-value="carpet_medium">Ковер (средний 3-6м²)</div>
                <div class="option-item" data-value="carpet_large">Ковер (большой от 6м²)</div>
            </div>
        </div>

        <div class="form-group" id="tariffGroup">
            <label>Выберите тариф:</label>
            <div class="tariff-options">
                <div class="tariff-option" data-tariff="base">Базовый</div>
                <div class="tariff-option" data-tariff="premium">Премиум</div>
            </div>
        </div>

        <div class="form-group extras">
            <label>Дополнительные услуги:</label>
            <div class="extra-option" data-extra="urgent">Срочный выезд (+20%)</div>
            <div class="extra-option" data-extra="stain">Удаление сложных пятен (+300 руб.)</div>
            <div class="extra-option" data-extra="odor">Удаление запахов (+500 руб.)</div>
        </div>

        <div class="result" id="result">
            Итоговая стоимость: 0 руб.
        </div>
    </div>

    <script>
        // База данных цен
        const prices = {
            base: {
                sofa_2: 1700,
                sofa_3: 2200,
                armchair: 1300,
                mattress_1: 1600,
                mattress_2: 2000,
                carpet_small: 900,
                carpet_medium: 1500,
                carpet_large: 2400
            },
            premium: {
                sofa_2: 1000,
                sofa_3: 1200,
                armchair: 700,
                mattress_1: 800,
                mattress_2: 1000,
                carpet_small: 0,
                carpet_medium: 0,
                carpet_large: 0
            },
            extras: {
                urgent: 0.2, // 20%
                stain: 300,
                odor: 500
            }
        };

        let currentSelections = {
            product: null,
            tariff: 'base',
            extras: []
        };

        // Инициализация обработчиков событий
        function initialize() {
            // Обработчики для выбора изделия
            document.querySelectorAll('#productType .option-item').forEach(item => {
                item.addEventListener('click', function() {
                    document.querySelectorAll('#productType .option-item').forEach(i => i.classList.remove('selected'));
                    this.classList.add('selected');
                    currentSelections.product = this.dataset.value;
                    calculateTotal();
                });
            });

            // Обработчики для выбора тарифа
            document.querySelectorAll('.tariff-option').forEach(option => {
                option.addEventListener('click', function() {
                    document.querySelectorAll('.tariff-option').forEach(o => o.classList.remove('selected'));
                    this.classList.add('selected');
                    currentSelections.tariff = this.dataset.tariff;
                    calculateTotal();
                });
            });

            // Обработчики для дополнительных услуг
            document.querySelectorAll('.extra-option').forEach(extra => {
                extra.addEventListener('click', function() {
                    this.classList.toggle('selected');
                    const extraType = this.dataset.extra;
                    
                    if (this.classList.contains('selected')) {
                        if (!currentSelections.extras.includes(extraType)) {
                            currentSelections.extras.push(extraType);
                        }
                    } else {
                        currentSelections.extras = currentSelections.extras.filter(e => e !== extraType);
                    }
                    calculateTotal();
                });
            });

            // Выбираем первый тариф по умолчанию
            document.querySelector('.tariff-option[data-tariff="base"]').classList.add('selected');
        }

        // Расчет общей стоимости
        function calculateTotal() {
            if (!currentSelections.product) {
                document.getElementById('result').textContent = 'Итоговая стоимость: 0 руб.';
                return;
            }

            let total = prices.base[currentSelections.product];
            
            // Добавляем наценку за премиум тариф
            if (currentSelections.tariff === 'premium') {
                total += prices.premium[currentSelections.product];
            }

            // Применяем дополнительные услуги
            currentSelections.extras.forEach(extra => {
                if (extra === 'urgent') {
                    total += total * prices.extras[extra];
                } else {
                    total += prices.extras[extra];
                }
            });

            document.getElementById('result').textContent = `Итоговая стоимость: ${Math.round(total)} руб.`;
        }

        // Запускаем при загрузке
        document.addEventListener('DOMContentLoaded', initialize);
    </script>
</body>
</html>